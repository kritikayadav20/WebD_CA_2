<?php require 'views/header.html'; ?>

<h3>My Todos</h3>
<h4>All Todos</h4>
<?php foreach($todos as $todo) { ?>
<article>
    <header>
        <small>Due: <?=$todo->formatDueDate();?></small>
    </header>
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h3><?=$todo->description;?></h3>
        <?php
            $color = 'red';
            $status = 'Pending';
            
            if ($todo->isCompleted) {
                $color = 'green';
                $status = 'Completed';
            }
        ?>
        <span class="badge" style="background-color: <?=$color;?>; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem;">
            <?=$status;?>
        </span>
    </div>
    <footer>
        <?php if (! $todo->isCompleted): ?>
            <a href="mark-complete.php?id=<?=$todo->id;?>">Mark Complete</a>
        <?php endif; ?>
        |
        <a href="edit.php?id=<?=$todo->id; ?>">Edit</a>
        |
        <a href="delete.php?id=<?=$todo->id; ?>" onclick="return confirm('Are you sure you want to delete this todo?');">Delete</a>
    </footer>
</article>
<?php } ?>

<h4>Due Today</h4>
<?php if (empty($dueToday)) { ?>
    <p>No todos due today.</p>
<?php } ?>
<?php foreach($dueToday as $todo) { ?>
<article>
    <header>
        <small>Due: <?=$todo->formatDueDate();?></small>
    </header>
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h3><?=$todo->description;?></h3>
        <?php
            $color = 'red';
            $status = 'Pending';
            
            if ($todo->isCompleted) {
                $color = 'green';
                $status = 'Completed';
            }
        ?>
        <span class="badge" style="background-color: <?=$color;?>; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem;">
            <?=$status;?>
        </span>
    </div>
    <footer>
        <?php if (! $todo->isCompleted): ?>
            <a href="mark-complete.php?id=<?=$todo->id;?>">Mark Complete</a>
        <?php endif; ?>
        |
        <a href="edit.php?id=<?=$todo->id; ?>">Edit</a>
        |
        <a href="delete.php?id=<?=$todo->id; ?>" onclick="return confirm('Are you sure you want to delete this todo?');">Delete</a>
    </footer>
</article>
<?php } ?>

<?php require 'views/footer.html'; ?>